<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>50% Dentist!</title>
<style>
  body{
    margin:0; height:100vh; display:grid; place-items:center;
    background: radial-gradient(circle at top, #ffffff, #eef7ff);
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    overflow:hidden;
  }

  /* âœ… Always-on confetti canvas */
  #confetti{
    position:fixed;
    inset:0;
    pointer-events:none;
    z-index:0;
  }

  .card{
    width:min(560px, 92vw);
    padding:28px 26px;
    border-radius:22px;
    background: rgba(255,255,255,0.8);
    box-shadow: 0 14px 44px rgba(0,0,0,0.12);
    text-align:center;
    position:relative;
    z-index:1; /* keep above confetti */
  }
  .tooth{
    font-size:84px;
    display:inline-block;
    animation: pop 700ms cubic-bezier(.2,.9,.2,1) 1, bob 1400ms ease-in-out 700ms infinite;
    transform-origin: 50% 90%;
    filter: drop-shadow(0 10px 18px rgba(0,0,0,0.12));
  }
  @keyframes pop{
    0%{transform:scale(0) rotate(-10deg); opacity:0}
    70%{transform:scale(1.15) rotate(6deg); opacity:1}
    100%{transform:scale(1) rotate(0deg)}
  }
  @keyframes bob{
    0%,100%{transform:translateY(0)}
    50%{transform:translateY(-8px)}
  }
  h1{
    margin:10px 0 6px;
    font-size: clamp(22px, 4vw, 34px);
  }
  p{
    margin:0 0 18px;
    font-size: clamp(14px, 2.4vw, 18px);
    opacity:0.9;
  }

  .bar-wrap{
    height:18px;
    background:#dbe9ff;
    border-radius:999px;
    overflow:hidden;
    position:relative;
  }
  .bar{
    height:100%;
    width:0%;
    background: linear-gradient(90deg, #5bc0eb, #9bc53d);
    border-radius:999px;
    transition: width 1400ms ease;
  }
  .marker{
    position:absolute;
    top:50%;
    transform: translate(-50%, -50%);
    font-size:22px;
    left:0%;
    transition: left 1400ms ease;
    filter: drop-shadow(0 6px 10px rgba(0,0,0,0.12));
  }
  .percent{
    margin-top:10px;
    font-weight:700;
    letter-spacing:0.2px;
  }

  .sparkles{
    position:absolute; inset:0; pointer-events:none; border-radius:22px; overflow:hidden;
  }
  .sparkles::before{
    content:"";
    position:absolute;
    width:140px; height:400px;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.95), transparent);
    transform: rotate(18deg);
    left:-180px; top:-120px;
    animation:sweep 2.4s ease-in-out 1.0s infinite;
  }
  @keyframes sweep{
    0%{left:-180px; opacity:0}
    15%{opacity:1}
    50%{left:calc(100% + 40px); opacity:1}
    70%{opacity:0}
    100%{left:calc(100% + 40px); opacity:0}
  }

  /* Respect reduced motion */
  @media (prefers-reduced-motion: reduce){
    #confetti { display:none; }
    .tooth { animation: none; }
    .sparkles::before { animation: none; }
    .bar { transition: none; }
    .marker { transition: none; }
  }
</style>
</head>
<body>

  <!-- âœ… Confetti layer -->
  <canvas id="confetti"></canvas>

  <div class="card">
    <div class="sparkles"></div>

    <div class="tooth">ðŸ¦·</div>
    <h1>Congrats â€” 50% Dentist!</h1>
    <p>Halfway through dentistry ðŸŽ“âœ¨ Keep going!</p>

    <div class="bar-wrap" aria-label="progress bar">
      <div class="bar" id="bar"></div>
      <div class="marker" id="marker">ðŸª¥</div>
    </div>

    <div class="percent" id="percent">0%</div>
  </div>

<script>
  // ====== Your progress animation (unchanged) ======
  const target = 50;               // change to any % if you want
  const bar = document.getElementById("bar");
  const marker = document.getElementById("marker");
  const percent = document.getElementById("percent");

  let val = 0;
  const steps = 60;
  const stepTime = 1400 / steps;

  requestAnimationFrame(() => {
    bar.style.width = target + "%";
    marker.style.left = target + "%";
  });

  const timer = setInterval(() => {
    val++;
    const current = Math.round((val / steps) * target);
    percent.textContent = current + "%";
    if (val >= steps) clearInterval(timer);
  }, stepTime);

  // ====== âœ… Always-on confetti rain ======
  const canvas = document.getElementById("confetti");
  const ctx = canvas.getContext("2d");

  let W, H, DPR;
  function resize() {
    DPR = window.devicePixelRatio || 1;
    W = Math.floor(window.innerWidth * DPR);
    H = Math.floor(window.innerHeight * DPR);
    canvas.width = W;
    canvas.height = H;
    canvas.style.width = window.innerWidth + "px";
    canvas.style.height = window.innerHeight + "px";
  }
  window.addEventListener("resize", resize);
  resize();

  const colors = ["#ff4da0","#7a5cff","#3db7ff","#ffcc66","#35d07f","#ff6b6b"];
  const confetti = [];

  // Tune these:
  const MAX = 260;            // max pieces on screen
  const SPAWN_PER_FRAME = 2;  // continuous spawn rate (lower = lighter)
  const GRAV = 0.08;          // gravity strength
  const DRIFT = 0.03;         // sideways drift

  function spawn(n = 1) {
    for (let i = 0; i < n; i++) {
      const size = (4 + Math.random() * 8) * DPR;
      confetti.push({
        x: Math.random() * W,
        y: -20 * DPR,
        vx: (Math.random() - 0.5) * 0.9 * DPR,
        vy: (1.5 + Math.random() * 2.8) * DPR,
        r: Math.random() * Math.PI,
        vr: (Math.random() - 0.5) * 0.18,
        w: size * (1 + Math.random()),
        h: size * (0.6 + Math.random()),
        a: 0.65 + Math.random() * 0.35,
        c: colors[(Math.random() * colors.length) | 0],
      });
    }
  }

  // seed some initial confetti
  spawn(120);

  function step() {
    // keep a steady stream
    if (confetti.length < MAX) spawn(SPAWN_PER_FRAME);

    ctx.clearRect(0, 0, W, H);

    for (let i = confetti.length - 1; i >= 0; i--) {
      const p = confetti[i];
      p.vy += GRAV * DPR;
      p.vx += (Math.random() - 0.5) * DRIFT * DPR;

      p.x += p.vx;
      p.y += p.vy;
      p.r += p.vr;

      // wrap sideways
      if (p.x < -40 * DPR) p.x = W + 40 * DPR;
      if (p.x > W + 40 * DPR) p.x = -40 * DPR;

      // remove if gone
      if (p.y > H + 60 * DPR) {
        confetti.splice(i, 1);
        continue;
      }

      ctx.save();
      ctx.globalAlpha = p.a;
      ctx.translate(p.x, p.y);
      ctx.rotate(p.r);
      ctx.fillStyle = p.c;
      ctx.fillRect(-p.w / 2, -p.h / 2, p.w, p.h);
      ctx.restore();
    }

    requestAnimationFrame(step);
  }

  // Only run if user hasn't asked for reduced motion
  if (!window.matchMedia("(prefers-reduced-motion: reduce)").matches) {
    step();
  }
</script>
</body>
</html>
